@use "style/colors";
@use "style/misc";
@use "style/longtext/about" as textstyle;
@use "style/queries";
@use "layouts";
@use "sass:list";
@use "sass:map";
@use "sass:math";
@use "sass:color";

$gruvbox: map.values(colors.$gruvbox-map);
$gruvbox-filter: map.values(colors.$gruvbox-filter-map);
$amount-links: 4;
$amount-of-main-h2: 1;
$amount-photos: 2;

$photos-caption-height: 1.8rem;
$name-title-height: 5rem;
$photos-carrousel-radius: 0.6rem;
$content-width: 900px;
$custom-scrollbar-offset: 1.5rem;

$scrollbar-width: 0.5rem;

:root {
  --main-h2-left-margin: 1rem;
  --photos-carrousel-radius: 0.6rem;
  --photo-select-button-height: 1rem;

  font-size: 16px;
}

* {
  padding: 0;
  margin: 0;
}

@include textstyle.common;

body {
  background-color: #d6d6d6;
  overflow: hidden;
  color: #444;
  width: 100vw; // Force width to ignore scrollbar
  height: 100vh; // For consistency of dependent calculations
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.scrollbar {
  position: absolute;

  > .actual-bar {
    background-color: #444;
  }
}

h1,
h2 {
  font-family: "Lexend", sans-serif;
  font-weight: bold;
}

h2 > span.h2-inline-footnote {
  font-size: 0.95rem;
  font-weight: normal;
  margin-left: 5px;
}

.name-links-header {
  display: flex;
  align-items: center;
}

.personal-links > a {
  display: inline-block;

  > img {
    display: inherit;
    width: inherit;
    height: inherit;
    transition: filter 0.5s 0.1s linear;
  }

  @for $i from 1 through $amount-links {
    &:nth-of-type(#{$i}) > img:hover {
      filter: #{list.nth($gruvbox-filter, $i % $amount-links + 1)};
    }
  }
}

main {
  width: inherit;
  overflow: hidden;

  > h2 {
    font-size: 1.8rem;
    margin-bottom: 0.8rem;
    margin-left: var(--main-h2-left-margin);
  }

  $delta: calc(60% / $amount-of-main-h2);
  @for $i from 1 through $amount-of-main-h2 {
    > h2:nth-of-type(#{$i})::after {
      content: "";
      display: block;
      background: linear-gradient(
        to right,
        #222 30%,
        #{list.nth($gruvbox, $i % $amount-of-main-h2 + 1)} 70%
      );
      width: calc(20% + #{$delta} * #{$i});
      height: 2px;
      border-radius: 1px;
      position: relative;
      bottom: -0.3rem;
      left: calc(var(--main-h2-left-margin) / 2 * -1);
    }
  }
}

.synthesis {
  display: inline-block;
}

.synthesis-photos-container {
  float: left;
  margin-right: textstyle.$float-margin;
}

.photos-carrousel {
  position: relative;
  list-style: none;
  background-color: #222;
  border-radius: $photos-carrousel-radius;
}

.photos-carrousel > {
  // </li> related rules' declaration order is very important

  li,
  li > img {
    width: inherit;
    height: inherit;
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
  }

  li {
    border-radius: $photos-carrousel-radius;
    overflow: hidden;
    transition: clip-path 0.8s ease-in-out;
    clip-path: circle(100%);
  }

  li > img {
    height: initial;
  }
}

.photo-select-control {
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: row;

  > img {
    display: inline-block;
    margin-right: $photos-carrousel-radius;
    @include misc.color-to-filter(#222);
  }

  > img[alt*="next" i] {
    transform: rotateY(180deg);
  }
}

$size: 1rem;
$gap: 0.8rem;

.select-container {
  .select {
    content: "";
    position: absolute;
    width: var(--photo-select-button-height);
    height: var(--photo-select-button-height);
    bottom: ($photos-caption-height - ($photos-caption-height / 2 - $size / 2)) * -1;
    background: #222;
    transition:
      background 0.4s ease-in,
      clip-path 0.3s ease-out;
    clip-path: circle(30%);

    &:hover {
      cursor: pointer;
      clip-path: circle(38%);
    }

    &.checked {
      clip-path: circle(45%);
    }

    @for $i from 1 through $amount-photos {
      $color: list.nth($gruvbox, $i % $amount-photos + 1);

      &.checked:nth-of-type(#{$i}) {
        background: $color;
      }

      li:nth-of-type(#{$i}) {
        z-index: $amount-photos - ($i - 1);
      }
    }
  }
}

.synthesis-h2-title-photos-caption {
  margin-right: auto;
  font-weight: normal;
  margin-left: $photos-carrousel-radius;
}

@media all {
  @include layouts.mobile-ui;
}

// @include queries.homepage-desktop-layout {
//   @include layouts.desktop-ui;
// }
